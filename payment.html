<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Payment Confirmation - Cinemania Delight</title>
    <style>
        body{font-family:'Segoe UI',Tahoma,Arial; background:#0a0a0a;color:#fff;margin:0;padding:0}
        header{display:flex;justify-content:space-between;align-items:center;padding:20px 50px;background:#000}
        .logo{font-weight:700}
        .container{display:flex;gap:30px;max-width:1200px;margin:30px auto;padding:0 20px}
        .left{flex:1}
        .right{width:360px}
        .card{background:#141218;padding:24px;border-radius:10px}
        h1{margin:0 0 12px;font-size:28px}
        .subtitle{color:#bbb;font-size:14px;margin-bottom:20px}
        .row{display:flex;justify-content:space-between;margin-bottom:12px}
        .muted{color:#aaa}
        .tickets{font-weight:700}
        .back{color:#ff6b6b;cursor:pointer;display:inline-block;margin-top:12px}
        /* order summary */
        .summary{background:#171722;padding:20px;border-radius:10px}
        .summary h3{margin-top:0}
        .line{display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px solid rgba(255,255,255,0.03)}
        .total{font-weight:800;font-size:18px}
        .buy{width:100%;padding:12px;background:#e50914;color:#fff;border:none;border-radius:8px;font-weight:700;cursor:pointer;opacity:0.5}
        .buy.enabled{opacity:1}
        .small{font-size:13px;color:#bbb}
        /* modal */
        .modal-back{position:fixed;inset:0;background:rgba(0,0,0,0.6);display:none;align-items:center;justify-content:center}
        .modal{background:#111;padding:20px;border-radius:8px;width:320px}
        .pm-option{padding:10px;border-radius:6px;background:#1a1a1a;margin-bottom:8px;cursor:pointer}
        footer{background:#000;padding:40px;margin-top:40px}
    </style>
</head>
<body>
    <header>
        <div class="logo">Cinemania<br><small>Delight</small></div>
        <div class="search"><input placeholder="Search" style="padding:8px;border-radius:6px;border:1px solid #333;background:transparent;color:#fff"></div>
        <div class="user">üë§</div>
    </header>

    <div class="container">
        <div class="left">
            <h1>PAYMENT CONFIRMATION</h1>
            <div class="subtitle">Confirm payment for the seats you ordered</div>

            <div class="card">
                <h3>Schedule Details</h3>
                <div style="height:12px"></div>
                <div class="row"><div class="muted">Movie title</div><div id="movie-title">-</div></div>
                <div class="row"><div class="muted">Date & Time</div><div id="movie-datetime">-</div></div>
                <div class="row"><div class="muted">Class</div><div id="movie-class">-</div></div>
                <div class="row"><div class="muted">Tickets</div><div id="movie-tickets">-</div></div>
                <div class="back" id="back-link">‚Üê Back</div>
            </div>
        </div>

        <div class="right">
            <div class="summary card">
                <h3>Order Summary</h3>
                <div id="txn-lines"></div>
                <div style="height:8px"></div>
                <div class="line"><div>Promo & Voucher</div><div id="promo-line">-</div></div>
                <div class="line total"><div>Total Pay</div><div id="total-pay">Rs. 0</div></div>
                <div style="height:10px"></div>
                <div class="small">Payment method: <span id="pm-selected">None</span> ‚Äî <a href="#" id="see-all">See all</a></div>
                <div style="height:12px"></div>
                <button id="buy-btn" class="buy" disabled>BUY TICKETS</button>
                <div class="small" style="margin-top:8px;color:#e07b7b">*Ticket purchases cannot be cancelled</div>
            </div>
        </div>
    </div>

    <div class="modal-back" id="modal-back">
        <div class="modal">
            <h4>Select Payment Method</h4>
            <div class="pm-option" data-id="card">Credit Card</div>
            <div class="pm-option" data-id="debit">Debit Card</div>
            <div class="pm-option" data-id="cash">Cash</div>
            <div style="height:8px"></div>
            <div style="text-align:right"><button id="pm-close">Close</button></div>
        </div>
    </div>

    <footer>
        <div style="max-width:1200px;margin:0 auto;display:flex;justify-content:space-between;color:#aaa">
            <div>Cinemania Delight</div>
            <div>Join our newsletter</div>
        </div>
    </footer>

    <script>
        function getParam(n){return new URLSearchParams(window.location.search).get(n)}
        const movie = getParam('movie')||getParam('title')||'';
        const theater = getParam('theater')||'';
        const time = getParam('time')||getParam('t')||'';
        const seats = (getParam('seats')||'').split(',').filter(Boolean);

        // sample pricing: regular seat price from query? fallback 50000
        const unitPrice = Number(getParam('price')) || 50000;

        document.getElementById('movie-title').textContent = movie.toUpperCase();
        document.getElementById('movie-datetime').textContent = `${new Date().toDateString()} | ${time}`;
        document.getElementById('movie-class').textContent = 'REGULAR 2D';
        document.getElementById('movie-tickets').textContent = `Tickets (${seats.length}) ${seats.join(', ')}`;

        // build txn lines
        const txnLines = document.getElementById('txn-lines');
        txnLines.innerHTML = '';
        const seatLine = document.createElement('div'); seatLine.className='line'; seatLine.innerHTML = `<div>REGULAR SEAT x${seats.length}</div><div>Rs. ${ (unitPrice*seats.length).toLocaleString() }</div>`; txnLines.appendChild(seatLine);
        const serviceLine = document.createElement('div'); serviceLine.className='line'; serviceLine.innerHTML = `<div>SERVICE FEES</div><div>Rs. ${ (seats.length*3000).toLocaleString() }</div>`; txnLines.appendChild(serviceLine);

        const promoEl = document.getElementById('promo-line'); promoEl.textContent='-';
        const total = (unitPrice*seats.length) + (seats.length*3000);
        document.getElementById('total-pay').textContent = `Rs. ${total.toLocaleString()}`;

        // Payment modal
        const modalBack = document.getElementById('modal-back');
        document.getElementById('see-all').addEventListener('click', (e)=>{ e.preventDefault(); modalBack.style.display='flex'; });
        document.getElementById('pm-close').addEventListener('click', ()=> modalBack.style.display='none');
        let selectedPM = null;
        document.querySelectorAll('.pm-option').forEach(opt => opt.addEventListener('click', ()=>{
            selectedPM = opt.dataset.id;
            document.getElementById('pm-selected').textContent = opt.textContent;
            document.getElementById('buy-btn').disabled = false;
            document.getElementById('buy-btn').classList.add('enabled');
            modalBack.style.display='none';
        }));

        document.getElementById('buy-btn').addEventListener('click', ()=>{
            if (!selectedPM) { alert('Select a payment method first'); return; }
            alert('Payment processed (demo). Redirecting to success page...');
            // redirect to a success page or show confirmation
            window.location.href = `success.html?seats=${seats.join(',')}&total=${total}`;
        });

        document.getElementById('back-link').addEventListener('click', ()=>{ window.history.back(); });
    </script>
</body>
</html>